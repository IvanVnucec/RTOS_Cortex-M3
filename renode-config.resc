# Filename: renode-config.resc

$bin?=@build/rtos.elf

# Create Machine & Load config
mach create

logLevel 0

machine LoadPlatformDescription @platforms/cpus/stm32f103.repl
machine LoadPlatformDescription @bluepill_board.repl

# Create a terminal window showing the output of UART1
showAnalyzer sysbus.uart1

machine StartGdbServer 3333

macro reset
"""
    sysbus LoadELF $bin
"""

runMacro $reset