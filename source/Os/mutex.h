#ifndef MUTEX_H
#define MUTEX_H


/*******************************************************************************************************
 *                         INCLUDE FILES
 ******************************************************************************************************/
#include <stdint.h>

#include "os_forward.h"
#include "mutex_forward.h"


/*******************************************************************************************************
 *                         CONSTANTS
 ******************************************************************************************************/

/*******************************************************************************************************
 *                         DATA STRUCTURES
 ******************************************************************************************************/
enum OS_MutexState_ENUM {
	OS_MUTEX_STATE_FREE,
	OS_MUTEX_STATE_OWNED
};


struct OS_Mutex_STRUCT {
	OS_MutexState_E state;
	OS_TCB_S *owner;
};


/*******************************************************************************************************
 *                         GLOBAL AND STATIC VARIABLES
 ******************************************************************************************************/
extern OS_TCB_S *OS_TCBCurrent;


/*******************************************************************************************************
 *                         PUBLIC FUNCTION PROTOTYPES
 ******************************************************************************************************/
void OS_MutexInit(OS_Mutex_S *mutex);
void OS_MutexPend(OS_Mutex_S *mutex);
void OS_MutexPost(OS_Mutex_S *mutex);


#endif /* #ifndef MUTEX_H */
